<div>
  <h2>Chat temps réel</h2>

  <p *ngIf="user">
    Connecté en tant que {{ user.role }} ({{ user.username }})
  </p>
  <p>
    Statut :
    <span [style.color]="connected ? 'green' : 'red'">
      {{ connected ? 'Connecté' : 'Déconnecté' }}
    </span>
  </p>

  <div *ngFor="let msg of messages">
    <strong>{{ msg.senderRole }} ({{ msg.senderName }}) :</strong>
    {{ msg.content }}
    <small> — {{ msg.timestamp | date:'shortTime' }}</small>
  </div>

  <div style="margin-top: 1rem;">
    <input
      type="text"
      [(ngModel)]="newMessage"
      placeholder="Écrire un message..."
      (keyup.enter)="sendMessage()"
    />
    <button (click)="sendMessage()">Envoyer</button>
  </div>
</div>
